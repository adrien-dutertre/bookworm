<div class="container mt-3 p-3 rounded bg-light-subtle">
  <form (submit)="search($event)">
    <div class="input-group">
      <span class="input-group-text">
        <label for="search-bar-id">Rechercher</label>
      </span>
      <input type="text" [formField]="searchForm.query" class="form-control form-control-lg" id="search-bar-id" />
      <button class="btn btn-primary" title="Rechercher">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search"
          viewBox="0 0 16 16">
          <path
            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
        </svg>
      </button>
    </div>
    <div class="form-text">Rechercher un ouvrage par nom, auteur.ice, ...</div>
  </form>
</div>
<div class="container mt-3">
  @switch (resultState()) {
  @case ('loading') {
  <div class="d-flex align-items-center">
    <strong role="status">Chargement des résultats...</strong>
    <div class="spinner-border ms-auto" aria-hidden="true"></div>
  </div>
  }
  @case ('loaded') {
  <div class="hstack">
    <div>
      <h2>
        <span [class]="searchResults().numFound > 0 ? 'text-primary-emphasis' : 'text-danger'">{{
          searchResults().numFound }}</span>
        résultats
      </h2>
    </div>
    <div class="ms-auto">
      <div class="btn-group" role="group">
        <input type="radio" class="btn-check" name="btnradio" id="grid-display" autocomplete="off"
          (click)="gridDisplay.set(true)" [checked]="gridDisplay()" />
        <label class="btn btn-outline-primary" for="grid-display">Grille</label>
        <input type="radio" class="btn-check" name="btnradio" id="list-display" autocomplete="off"
          (click)="gridDisplay.set(false)" [checked]="!gridDisplay()" />
        <label class="btn btn-outline-primary" for="list-display">Liste</label>
      </div>
    </div>
  </div>

  <app-results [resultsData]="searchResults().docs" [grid]="gridDisplay()"></app-results>
  }
  @case ('error') {
  <div class="alert alert-danger d-flex align-items-center" role="alert">
    <div>
      Une erreur est survenue, veuillez réessayer plus tard.
    </div>
  </div>
  }
  }
</div>