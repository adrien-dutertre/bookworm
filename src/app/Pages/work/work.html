@let work = workSubscription$ | async;

<div class="container bg-light-subtle rounded mt-3 p-3">
  <div class="row">
    <div class="col">
      <h1>{{ work.title }}</h1>
      <h4>{{ work.subtitle }}</h4>
      @let workKey = searchService.getWorkKey(work.key);
      @let isFavorite = favoritesService.isFavorite(workKey);
      <input
        type="checkbox"
        class="btn-check"
        id="addFavoritesButton"
        [checked]="isFavorite"
        (change)="favoriteManagement(workKey, work.title, work.covers[0])"
        autocomplete="off"
      />
      <label class="btn btn-sm btn-outline-secondary" for="addFavoritesButton">
        {{ isFavorite ? "Favoris" : "Ajouter aux favoris" }}
      </label>
      <p>
        @for (author of work.authors; track $index) {
          @let authorId = author.author.key;
          @let authorKey = searchService.getAuthorKey(authorId);
          <!-- @let authorName = this.searchService.getAuthorName(authorKey); -->
          <a class="mr-3" [routerLink]="['/author', authorKey]">{{ authorId }}</a>
        }
      </p>

      <p class="max-w-xl">
        {{ work.description?.value ? work.description.value : work.description }}
      </p>
    </div>
    <div class="col-3">
      @let imgSrc = searchService.getCover(work.covers[0], 'L');
      <img [src]="imgSrc" class="img-fluid img-thumbnail" [alt]="'Couverture de ' + work.title" />
    </div>
  </div>
</div>
